name: Run tests
on:
  push:
    branches:
      - master

jobs:
  run-tests:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2

      - name: mkdir build folder
        run: mkdir -p myxmlpp/build
      - name: install criterion
        run: sudo apt-get update && sudo add-apt-repository ppa:snaipewastaken/ppa && sudo apt-get update -y && sudo apt-get install -y criterion-dev
      - name: cmake build
        run: cmake -Bmyxmlpp/build -H.
      - name: build unit test
        run: cmake --build myxmlpp/build --target unit-tests --parallel 2
      - name: run tests
        run: cd myxmlpp && ./unit-tests

